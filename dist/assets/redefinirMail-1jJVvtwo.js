import{a as r,u as D,j as e,R as b,T as n,S as E,b as L}from"./GlobalStyles-Dqpp29B9.js";import{R as j,M as F,L as t,B as I,C as B,F as U}from"./UserDashboardStyles-BUujLACN.js";import{I as w,a as _}from"./index-CVGnD8mp.js";import{U as N}from"./userContext-D66xfPlX.js";import{F as a,L as f,I as p,a as A,B as P}from"./ContaUserStyles-jzYrjlID.js";import{a as C}from"./index-CmN5j4cY.js";import{a as O}from"./axios-DnYME9kn.js";function X(){const{user:i,logout:g}=r.useContext(N),[l,v]=r.useState(""),[R,y]=r.useState(""),[d,c]=r.useState(""),[m,u]=r.useState(""),[T]=D(),q=T.get("token"),[h,M]=r.useState(!1);r.useState(!1);const[o,z]=r.useState(!1),x=()=>{z(!o)},k=async s=>{if(s.preventDefault(),M(!0),l!==R){u("Os e-mails nÃ£o coincidem."),c("");return}try{const S=await O.put("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/usuario/mail/redefinir-mail",{token:q,email_user:l});S.data.error?(u(S.data.error),c("")):(c("E-mail redefinido com sucesso."),u(""),setTimeout(()=>g(),1500))}catch{u("Erro ao redefinir e-mail. Tente novamente."),c("")}finally{M(!1)}};if(i.funcao_user==="admin")return e.jsxs(b.Fragment,{children:[o?e.jsxs(j,{children:[e.jsx(w,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:x}),e.jsxs(n,{children:["Boas-vindas, ",i.nome_user]})]}):e.jsxs(j,{children:[e.jsx(_,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:x}),e.jsxs(n,{children:["Boas-vindas, ",i.nome_user]})]}),o&&e.jsxs(F,{children:[e.jsx(t,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(t,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(t,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(I,{onClick:g,children:"Sair"})]}),e.jsx(B,{children:e.jsxs(U,{onSubmit:k,children:[e.jsx(n,{children:"Redefinir E-mail"}),e.jsxs(a,{children:[e.jsx(f,{htmlFor:"email-red",children:e.jsx(C,{})}),e.jsx(p,{type:"email",placeholder:"Novo e-mail",name:"email-red",required:!0,value:l,onChange:s=>v(s.target.value)})]}),e.jsxs(a,{children:[e.jsx(f,{htmlFor:"email-conf-red",children:e.jsx(C,{})}),e.jsx(p,{type:"email",placeholder:"Confirmar novo e-mail",name:"email-conf-red",required:!0,value:R,onChange:s=>y(s.target.value)})]}),d&&e.jsx(E,{children:d}),m&&e.jsx(L,{children:m}),e.jsxs(a,{style:{alignItems:"flex-end",gap:"2rem"},children:[e.jsx(A,{to:"/minha-conta",children:"Voltar"}),e.jsx(P,{type:"submit",disabled:h,style:{width:"10rem"},children:h?"Redefinindo...":"Redefinir"})]})]})})]});if(i.funcao_user==="user")return e.jsxs(b.Fragment,{children:[o?e.jsxs(j,{children:[e.jsx(w,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:x}),e.jsxs(n,{children:["Boas-vindas, ",i.nome_user]})]}):e.jsxs(j,{children:[e.jsx(_,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:x}),e.jsxs(n,{children:["Boas-vindas, ",i.nome_user]})]}),o&&e.jsxs(F,{children:[e.jsx(t,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(t,{to:"/meus-pedidos",children:"Meus Pedidos"}),e.jsx(I,{onClick:g,children:"Sair"})]}),e.jsx(B,{children:e.jsxs(U,{onSubmit:k,children:[e.jsx(n,{children:"Redefinir E-mail"}),e.jsxs(a,{children:[e.jsx(f,{htmlFor:"email-red",children:e.jsx(C,{})}),e.jsx(p,{type:"email",placeholder:"Novo e-mail",name:"email-red",required:!0,value:l,onChange:s=>v(s.target.value)})]}),e.jsxs(a,{children:[e.jsx(f,{htmlFor:"email-conf-red",children:e.jsx(C,{})}),e.jsx(p,{type:"email",placeholder:"Confirmar novo e-mail",name:"email-conf-red",required:!0,value:R,onChange:s=>y(s.target.value)})]}),d&&e.jsx(E,{children:d}),m&&e.jsx(L,{children:m}),e.jsxs(a,{style:{alignItems:"flex-end",gap:"2rem"},children:[e.jsx(A,{to:"/minha-conta",children:"Voltar"}),e.jsx(P,{type:"submit",disabled:h,style:{width:"10rem"},children:h?"Redefinindo...":"Redefinir"})]})]})})]})}export{X as R};
