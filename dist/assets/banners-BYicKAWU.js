import{a,j as e,R as K,T as m,C as Q,g as F}from"./GlobalStyles-Dqpp29B9.js";import{C as V,a as X,b as A,c as M,I as Y,L as j,d as p,F as Z,e as w,S as N,B as D,f as ee,g as re}from"./ProdutosStyle-8Z2-wOEa.js";import{A as ne,a as se}from"./index-DT7h3x8e.js";import{a as B}from"./axios-DnYME9kn.js";import{R as L,M as ae,L as b,B as te}from"./UserDashboardStyles-BUujLACN.js";import{I as oe,a as ie}from"./index-CVGnD8mp.js";import{U as ce}from"./userContext-D66xfPlX.js";import{C as le,a as de,B as ue,b as he}from"./NavBarStyles-CgKT-dJj.js";import{b as xe}from"./index-U_MZ96hN.js";import{T as me,C as je,B as T}from"./ProdutoStyles-Cz6hDj1C.js";function ve(){const{user:f,logout:U}=a.useContext(ce),[d,g]=a.useState(""),[o,C]=a.useState(""),[I,P]=a.useState(""),[c,u]=a.useState([]),[h,R]=a.useState(!1),[q,O]=a.useState(""),[y,l]=a.useState([]),_=()=>{R(!h)},z=r=>{const n=r.target.value.toLowerCase();O(n);const s=c.filter(i=>i.nome_banner.toLowerCase().includes(n)).sort((i,J)=>J.id_banner-i.id_banner);l(s)},x=5,[t,G]=a.useState(1),v=(t-1)*x,W=v+x,S=y.slice(v,W),k=Math.ceil(y.length/x),E=r=>{G(r)},$=async r=>{r.preventDefault();const n=new FormData;n.append("img_banner",d),n.append("nome_banner",I);try{const s=await B.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner",n,{headers:{"Content-Type":"multipart/form-data"}});s.data.result?(alert("Banner inserido com sucesso!"),g(""),P(""),u([...c,s.data.result]),l([...c,s.data.result])):alert("Erro ao inserir banner")}catch(s){console.error("Erro ao inserir banner.",s)}},H=async r=>{if(r.preventDefault(),!o||isNaN(o)){alert("Por favor, insira um ID de banner válido");return}try{if((await B.delete(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner/${o}`)).data.result){alert("Banner excluído com sucesso!");const s=c.filter(i=>i.id_banner!==Number(o));u(s),l(s),C("")}else alert("Erro ao excluir Banner.")}catch(n){console.error("Erro ao excluir Banner",n),alert("Erro ao excluir Banner.")}};return a.useEffect(()=>{(async()=>{try{const n=await B.get("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banners");u(n.data.result),l(n.data.result)}catch(n){console.error("Erro ao buscar todos os banners.",n)}})()},[]),e.jsxs(K.Fragment,{children:[h?e.jsxs(L,{children:[e.jsx(oe,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:_}),e.jsxs(m,{children:["Boas-vindas, ",f.nome_user]})]}):e.jsxs(L,{children:[e.jsx(ie,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:_}),e.jsxs(m,{children:["Boas-vindas, ",f.nome_user]})]}),h&&e.jsxs(ae,{children:[e.jsx(b,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(b,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(b,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(te,{onClick:U,children:"Sair"})]}),e.jsxs(Q,{children:[e.jsx(m,{children:"Banners"}),e.jsx(V,{children:e.jsxs(X,{children:[e.jsx(A,{children:e.jsxs(M,{children:[e.jsx(F,{style:{color:"#A87826"},children:"Inserir Banner"}),e.jsx(Y,{children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(ne,{})}),e.jsx("label",{htmlFor:"fileInput",children:"Escolher Imagem"}),e.jsx("input",{type:"file",id:"fileInput",required:!0,onChange:r=>g(r.target.files[0])})," ",d&&e.jsx(Z,{children:d.name})," "]})}),e.jsxs(j,{children:[e.jsxs(p,{htmlFor:"nome_banner",children:[e.jsx(xe,{})," "]}),e.jsx(w,{type:"text",id:"nome_banner",placeholder:"Nome do Banner",value:I,required:!0,onChange:r=>P(r.target.value)})," "]}),e.jsxs(N,{children:[e.jsx(D,{onClick:$,children:"Inserir"})," "]})]})}),e.jsx(A,{children:e.jsxs(M,{children:[e.jsx(F,{style:{color:"#A87826"},children:"Excluir Banner"}),e.jsxs(j,{children:[e.jsx(p,{htmlFor:"id_banner",children:e.jsx(se,{})}),e.jsx(w,{type:"number",id:"id_banner",placeholder:"ID do banner",value:o,onChange:r=>C(r.target.value)})," "]}),e.jsxs(N,{children:[e.jsx(D,{onClick:H,children:"Excluir"})," "]})]})})]})}),e.jsxs(le,{style:{width:"100%",justifyContent:"center",margin:"2rem 0 0 0"},children:[e.jsx(de,{type:"text",name:"searchBanner",id:"searchBanner",value:q,placeholder:"Banner que procura?",onChange:z}),e.jsxs(ue,{children:[e.jsx(he,{})," "]})]}),e.jsx(ee,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(me,{children:"ID"}),e.jsx("th",{children:"Imagem"})]})}),e.jsx("tbody",{children:Array.isArray(S)&&S.slice().sort((r,n)=>n.id_banner-r.id_banner).map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.id_banner}),e.jsx("td",{children:e.jsx(re,{src:r.img_banner,alt:r.nome_banner,title:r.nome_banner})})]},r.id_banner))})]})}),e.jsxs(je,{children:[e.jsx(T,{disabled:t===1,onClick:()=>E(t-1),children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",k]}),e.jsx(T,{disabled:t===k,onClick:()=>E(t+1),children:"Próxima"})]})]})]})}export{ve as B};
