import{a as n,j as e,R as S,T as r,g as u,S as C,b as R}from"./GlobalStyles-Dqpp29B9.js";import{R as x,M,L as i,B as b,C as y,F as k}from"./UserDashboardStyles-BUujLACN.js";import{I as E,a as v}from"./index-CVGnD8mp.js";import{U}from"./userContext-Hfd7AKwO.js";import{d as B}from"./ContaUserStyles-jzYrjlID.js";import{a as _}from"./axios-DnYME9kn.js";function z(){const{user:s,logout:j}=n.useContext(U),[t,m]=n.useState(""),[c,h]=n.useState(""),[o,g]=n.useState(!1),[d,f]=n.useState(!1),l=()=>{g(!o)},p=async()=>{f(!0);try{const a=await _.post(`http://localhost:3001/aurea/usuario/${s.id_user}/solicitar-redefinicao-mail`);a.data.error?(console.error("Erro na resposta:",a.data.error),h(a.data.error),m("")):(m("Solicitação enviada com sucesso. Verifique seu e-mail."),h(""))}catch(a){console.error("Erro na requisição:",a),h("Erro ao enviar solicitação. Tente novamente."),m("")}finally{f(!1)}};if(s.funcao_user==="admin")return e.jsxs(S.Fragment,{children:[o?e.jsxs(x,{children:[e.jsx(E,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(x,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),o&&e.jsxs(M,{children:[e.jsx(i,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(i,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(i,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(i,{to:"/produtos",children:"Meus Produtos"}),e.jsx(b,{onClick:j,children:"Sair"})]}),e.jsx(y,{children:e.jsxs(k,{children:[e.jsx(r,{children:"Redefinir E-mail"}),e.jsx(u,{children:"Para redefinir o seu e-mail, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(B,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de e-mail"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]});if(s.funcao_user==="user")return e.jsxs(S.Fragment,{children:[o?e.jsxs(x,{children:[e.jsx(E,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(x,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),o&&e.jsxs(M,{children:[e.jsx(i,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(i,{to:"/meus-pedidos",children:"Meus Pedidos"}),e.jsx(b,{onClick:j,children:"Sair"})]}),e.jsx(y,{children:e.jsxs(k,{children:[e.jsx(r,{children:"Redefinir E-mail"}),e.jsx(u,{children:"Para redefinir o seu e-mail, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(B,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de e-mail"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]})}export{z as C};
