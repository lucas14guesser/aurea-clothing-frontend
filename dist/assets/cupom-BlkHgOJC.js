import{a as r,j as e,R as T,T as l,C as G,g as S}from"./GlobalStyles-Dqpp29B9.js";import{C as O,a as $,b as E,c as B,L as a,d as c,e as n,S as k,B as M,f as z}from"./ProdutosStyle-8Z2-wOEa.js";import{M as V}from"./index-D6JL9M7r.js";import{a as H}from"./index-DT7h3x8e.js";import{b as J,d as K}from"./index-U_MZ96hN.js";import{a as i}from"./axios-DnYME9kn.js";import{R as A,M as Q,L as m,B as W}from"./UserDashboardStyles-BUujLACN.js";import{I as X,a as Y}from"./index-CVGnD8mp.js";import{U as Z}from"./userContext-D66xfPlX.js";import{a as ee,B as oe,b as se}from"./NavBarStyles-CgKT-dJj.js";import{a as re}from"./Functions-Db1ipCHc.js";import{C as te}from"./CdRastreioStyles-rUZR9pxi.js";function Ce(){const{user:p,logout:P}=r.useContext(Z),[h,x]=r.useState(""),[j,C]=r.useState(""),[f,v]=r.useState(""),[F,w]=r.useState([]),[d,g]=r.useState(""),[u,D]=r.useState(!1),[I,L]=r.useState(""),[y,_]=r.useState([]),b=()=>{D(!u)};r.useEffect(()=>{(async()=>{try{const s=await i.get("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/listar-todos-cupom");w(s.data.result),_(s.data.result)}catch(s){console.error("Erro ao buscar todos os cupom.",s)}})()},[]);const N=o=>{const s=o.target.value.toLowerCase();L(s);const t=F.filter(q=>q.nome_cupom.toLowerCase().includes(s));_(t)},U=async o=>{o.preventDefault();const s={nome_cupom:h,validade_cupom:j,desconto_cupom:f};try{(await i.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/gerar-cupom",s)).data.result?(alert("Cupom de desconto gerado com sucesso!"),x(""),C(""),v("")):alert("Erro ao gerar cupom de desconto.")}catch(t){console.error("Erro ao gerar cupom de desconto",t)}},R=async o=>{if(o.preventDefault(),!d){alert("Por favor, insira um nome de cupom válido");return}try{(await i.delete(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/deletar-cupom/${d}`)).data.result?(g(""),alert("Cupom de desconto excluído com sucesso!")):alert("Erro ao excluir cupom de desconto.")}catch(s){console.error("Erro ao excluir cupom de desconto",s),alert("Erro ao excluir cupom de desconto.")}};return e.jsxs(T.Fragment,{children:[u?e.jsxs(A,{children:[e.jsx(X,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:b}),e.jsxs(l,{children:["Boas-vindas, ",p.nome_user]})]}):e.jsxs(A,{children:[e.jsx(Y,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:b}),e.jsxs(l,{children:["Boas-vindas, ",p.nome_user]})]}),u&&e.jsxs(Q,{children:[e.jsx(m,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(m,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(m,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(W,{onClick:P,children:"Sair"})]}),e.jsxs(G,{children:[e.jsx(l,{children:"Cupom"}),e.jsx(O,{children:e.jsxs($,{children:[e.jsx(E,{children:e.jsxs(B,{children:[e.jsx(S,{style:{color:"#A87826"},children:"Cadastrar cupom de desconto"}),e.jsxs(a,{children:[e.jsx(c,{htmlFor:"nome_cupom",children:e.jsx(J,{})}),e.jsx(n,{type:"text",placeholder:"Nome do Cupom",id:"nome_cupom",required:!0,value:h,onChange:o=>x(o.target.value)})]}),e.jsxs(a,{children:[e.jsx(c,{htmlFor:"validade_cupom",children:e.jsx(K,{})}),e.jsx(n,{type:"date",id:"validade_cupom",name:"validade_cupom",required:!0,value:j,onChange:o=>C(o.target.value)})]}),e.jsxs(a,{children:[e.jsx(c,{htmlFor:"desconto_cupom",children:e.jsx(V,{})}),e.jsx(n,{type:"number",placeholder:"Desconto do Cupom em %",id:"desconto_cupom",required:!0,value:f,onChange:o=>v(o.target.value)})]}),e.jsx(k,{children:e.jsx(M,{onClick:U,children:"Gerar"})})]})}),e.jsx(E,{children:e.jsxs(B,{children:[e.jsx(S,{style:{color:"#A87826"},children:"Excluir cupom de desconto"}),e.jsxs(a,{children:[e.jsx(c,{htmlFor:"nome_cupom",children:e.jsx(H,{})}),e.jsx(n,{type:"text",id:"nome_cupom",placeholder:"Nome do cupom",value:d,onChange:o=>g(o.target.value)})]}),e.jsx(k,{children:e.jsx(M,{onClick:R,children:"Excluir Cupom"})})]})})]})}),e.jsxs(te,{children:[e.jsx(ee,{type:"text",name:"searchCupom",id:"searchCupom",value:I,placeholder:"Cupom que procura?",onChange:N}),e.jsx(oe,{children:e.jsx(se,{})})]}),e.jsx(z,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nome"}),e.jsx("th",{children:"Validade"}),e.jsx("th",{children:"Desconto"})]})}),e.jsx("tbody",{children:Array.isArray(y)&&y.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.nome_cupom}),e.jsx("td",{children:`Até ${re(o.validade_cupom)}`}),e.jsx("td",{children:`${o.desconto_cupom}%`})]},o.nome_cupom))})]})})]})]})}export{Ce as C};
