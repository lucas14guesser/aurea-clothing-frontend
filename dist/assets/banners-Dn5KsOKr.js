import{a as s,j as e,R as K,T as m,C as Q,g as k}from"./GlobalStyles-Dqpp29B9.js";import{C as V,a as X,b as E,c as F,I as Y,L as p,d as j,F as Z,e as A,S as w,B as M,f as ee,g as ne}from"./ProdutosStyle-8Z2-wOEa.js";import{A as re,a as se}from"./index-DT7h3x8e.js";import{a as b}from"./axios-DnYME9kn.js";import{R as L,M as ae,L as B,B as te}from"./UserDashboardStyles-BUujLACN.js";import{I as oe,a as ie}from"./index-CVGnD8mp.js";import{U as ce}from"./userContext-D66xfPlX.js";import{C as le,a as de,B as ue,b as he}from"./NavBarStyles-CgKT-dJj.js";import{b as xe}from"./index-U_MZ96hN.js";import{T as me,C as pe,B as T}from"./ProdutoStyles-Cz6hDj1C.js";function ve(){const{user:f,logout:D}=s.useContext(ce),[c,g]=s.useState(""),[U,N]=s.useState(""),[i,l]=s.useState(""),[C,I]=s.useState([]),[d,q]=s.useState(!1),[R,O]=s.useState(""),[u,h]=s.useState([]),_=()=>{q(!d)},z=n=>{const r=n.target.value.toLowerCase();O(r);const a=C.filter(o=>o.nome_banner.toLowerCase().includes(r)).sort((o,J)=>J.id_banner-o.id_banner);h(a)},x=5,[t,G]=s.useState(1),P=(t-1)*x,W=P+x,y=u.slice(P,W),v=Math.ceil(u.length/x),S=n=>{G(n)},$=async n=>{n.preventDefault();const r=new FormData;r.append("img_banner",c),r.append("nome_banner",i);try{const a=await b.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner",r,{headers:{"Content-Type":"multipart/form-data"}});if(a.data.result){alert("Banner inserido com sucesso!"),g(""),l("");const o={img_banner:a.data.result.img_banner,nome_banner:i,public_id:a.data.result.public_id,id_banner:a.data.result.id_banner};I([...C,o]),h([...u,o])}else alert("Erro ao inserir banner")}catch(a){console.error("Erro ao inserir banner.",a)}},H=async n=>{if(n.preventDefault(),!i){alert("Por favor, insira o nome do arquivo do banner");return}try{(await b.delete(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner/${i}`)).data.result?(l(""),alert("Banner excluído com sucesso!")):alert("Erro ao excluir o banner.")}catch(r){console.error("Erro ao excluir Banner",r),alert("Erro ao excluir o banner.")}};return s.useEffect(()=>{(async()=>{try{const r=await b.get("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banners");I(r.data.result),h(r.data.result)}catch(r){console.error("Erro ao buscar todos os banners.",r)}})()},[]),e.jsxs(K.Fragment,{children:[d?e.jsxs(L,{children:[e.jsx(oe,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:_}),e.jsxs(m,{children:["Boas-vindas, ",f.nome_user]})]}):e.jsxs(L,{children:[e.jsx(ie,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:_}),e.jsxs(m,{children:["Boas-vindas, ",f.nome_user]})]}),d&&e.jsxs(ae,{children:[e.jsx(B,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(B,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(B,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(te,{onClick:D,children:"Sair"})]}),e.jsxs(Q,{children:[e.jsx(m,{children:"Banners"}),e.jsx(V,{children:e.jsxs(X,{children:[e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(k,{style:{color:"#A87826"},children:"Inserir Banner"}),e.jsx(Y,{children:e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(re,{})}),e.jsx("label",{htmlFor:"fileInput",children:"Escolher Imagem"}),e.jsx("input",{type:"file",id:"fileInput",required:!0,onChange:n=>g(n.target.files[0])})," ",c&&e.jsx(Z,{children:c.name})," "]})}),e.jsxs(p,{children:[e.jsxs(j,{htmlFor:"nome_banner",children:[e.jsx(xe,{})," "]}),e.jsx(A,{type:"text",id:"nome_banner",placeholder:"Nome do Banner",value:i,required:!0,onChange:n=>l(n.target.value)})," "]}),e.jsxs(w,{children:[e.jsx(M,{onClick:$,children:"Inserir"})," "]})]})}),e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(k,{style:{color:"#A87826"},children:"Excluir Banner"}),e.jsxs(p,{children:[e.jsx(j,{htmlFor:"id_banner",children:e.jsx(se,{})}),e.jsx(A,{type:"number",id:"id_banner",placeholder:"ID do banner",value:U,onChange:n=>N(n.target.value)})," "]}),e.jsxs(w,{children:[e.jsx(M,{onClick:H,children:"Excluir"})," "]})]})})]})}),e.jsxs(le,{style:{width:"100%",justifyContent:"center",margin:"2rem 0 0 0"},children:[e.jsx(de,{type:"text",name:"searchBanner",id:"searchBanner",value:R,placeholder:"Banner que procura?",onChange:z}),e.jsxs(ue,{children:[e.jsx(he,{})," "]})]}),e.jsx(ee,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(me,{children:"ID"}),e.jsx("th",{children:"Imagem"})]})}),e.jsx("tbody",{children:Array.isArray(y)&&y.slice().sort((n,r)=>r.id_banner-n.id_banner).map(n=>e.jsxs("tr",{children:[e.jsx("td",{children:n.id_banner}),e.jsx("td",{children:e.jsx(ne,{src:n.img_banner,alt:n.nome_banner,title:n.nome_banner})})]},n.id_banner))})]})}),e.jsxs(pe,{children:[e.jsx(T,{disabled:t===1,onClick:()=>S(t-1),children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",v]}),e.jsx(T,{disabled:t===v,onClick:()=>S(t+1),children:"Próxima"})]})]})]})}export{ve as B};
