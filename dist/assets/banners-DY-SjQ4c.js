import{a as s,j as e,R as K,T as h,C as Q,g as k}from"./GlobalStyles-Dqpp29B9.js";import{C as V,a as X,b as E,c as F,I as Y,L as x,d as m,F as Z,e as A,S as M,B as w,f as ee,g as re}from"./ProdutosStyle-8Z2-wOEa.js";import{A as ne,a as se}from"./index-DT7h3x8e.js";import{a as j}from"./axios-DnYME9kn.js";import{R as L,M as ae,L as p,B as te}from"./UserDashboardStyles-BUujLACN.js";import{I as oe,a as ie}from"./index-CVGnD8mp.js";import{U as ce}from"./userContext-D66xfPlX.js";import{C as le,a as de,B as ue,b as he}from"./NavBarStyles-CgKT-dJj.js";import{b as xe}from"./index-U_MZ96hN.js";import{T as me,C as je,B as T}from"./ProdutoStyles-Cz6hDj1C.js";function ve(){const{user:b,logout:D}=s.useContext(ce),[i,B]=s.useState(""),[U,N]=s.useState(""),[o,c]=s.useState(""),[f,g]=s.useState([]),[l,q]=s.useState(!1),[R,O]=s.useState(""),[C,I]=s.useState([]),P=()=>{q(!l)},z=r=>{const n=r.target.value.toLowerCase();O(n);const t=f.filter(u=>u.nome_banner.toLowerCase().includes(n)).sort((u,J)=>J.id_banner-u.id_banner);I(t)},d=5,[a,G]=s.useState(1),y=(a-1)*d,W=y+d,_=C.slice(y,W),v=Math.ceil(C.length/d),S=r=>{G(r)},$=async r=>{r.preventDefault();const n=new FormData;n.append("img_banner",i),n.append("nome_banner",o);try{const t=await j.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner",n,{headers:{"Content-Type":"multipart/form-data"}});t.data.result?(alert("Banner inserido com sucesso!"),B(""),c(""),g([...f,t.data.result])):alert("Erro ao inserir banner")}catch(t){console.error("Erro ao inserir banner.",t)}},H=async r=>{if(r.preventDefault(),!o){alert("Por favor, insira o nome do arquivo do banner");return}try{(await j.delete(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banner/${o}`)).data.result?(c(""),alert("Banner excluído com sucesso!")):alert("Erro ao excluir o banner.")}catch(n){console.error("Erro ao excluir Banner",n),alert("Erro ao excluir o banner.")}};return s.useEffect(()=>{(async()=>{try{const n=await j.get("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/banners");g(n.data.result),I(n.data.result)}catch(n){console.error("Erro ao buscar todos os banners.",n)}})()},[]),e.jsxs(K.Fragment,{children:[l?e.jsxs(L,{children:[e.jsx(oe,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:P}),e.jsxs(h,{children:["Boas-vindas, ",b.nome_user]})]}):e.jsxs(L,{children:[e.jsx(ie,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:P}),e.jsxs(h,{children:["Boas-vindas, ",b.nome_user]})]}),l&&e.jsxs(ae,{children:[e.jsx(p,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(p,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(p,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(te,{onClick:D,children:"Sair"})]}),e.jsxs(Q,{children:[e.jsx(h,{children:"Banners"}),e.jsx(V,{children:e.jsxs(X,{children:[e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(k,{style:{color:"#A87826"},children:"Inserir Banner"}),e.jsx(Y,{children:e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(ne,{})}),e.jsx("label",{htmlFor:"fileInput",children:"Escolher Imagem"}),e.jsx("input",{type:"file",id:"fileInput",required:!0,onChange:r=>B(r.target.files[0])})," ",i&&e.jsx(Z,{children:i.name})," "]})}),e.jsxs(x,{children:[e.jsxs(m,{htmlFor:"nome_banner",children:[e.jsx(xe,{})," "]}),e.jsx(A,{type:"text",id:"nome_banner",placeholder:"Nome do Banner",value:o,required:!0,onChange:r=>c(r.target.value)})," "]}),e.jsxs(M,{children:[e.jsx(w,{onClick:$,children:"Inserir"})," "]})]})}),e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(k,{style:{color:"#A87826"},children:"Excluir Banner"}),e.jsxs(x,{children:[e.jsx(m,{htmlFor:"id_banner",children:e.jsx(se,{})}),e.jsx(A,{type:"number",id:"id_banner",placeholder:"ID do banner",value:U,onChange:r=>N(r.target.value)})," "]}),e.jsxs(M,{children:[e.jsx(w,{onClick:H,children:"Excluir"})," "]})]})})]})}),e.jsxs(le,{style:{width:"100%",justifyContent:"center",margin:"2rem 0 0 0"},children:[e.jsx(de,{type:"text",name:"searchBanner",id:"searchBanner",value:R,placeholder:"Banner que procura?",onChange:z}),e.jsxs(ue,{children:[e.jsx(he,{})," "]})]}),e.jsx(ee,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(me,{children:"ID"}),e.jsx("th",{children:"Imagem"})]})}),e.jsx("tbody",{children:Array.isArray(_)&&_.slice().sort((r,n)=>n.id_banner-r.id_banner).map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.id_banner}),e.jsx("td",{children:e.jsx(re,{src:r.img_banner,alt:r.nome_banner,title:r.nome_banner})})]},r.id_banner))})]})}),e.jsxs(je,{children:[e.jsx(T,{disabled:a===1,onClick:()=>S(a-1),children:"Anterior"}),e.jsxs("span",{children:["Página ",a," de ",v]}),e.jsx(T,{disabled:a===v,onClick:()=>S(a+1),children:"Próxima"})]})]})]})}export{ve as B};
