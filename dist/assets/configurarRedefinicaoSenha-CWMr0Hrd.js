import{a,j as e,R as S,T as r,g as u,S as C,b as R}from"./GlobalStyles-Dqpp29B9.js";import{R as h,M,L as o,B as y,C as b,F as k}from"./UserDashboardStyles-BUujLACN.js";import{I as v,a as B}from"./index-CVGnD8mp.js";import{U}from"./userContext-Hfd7AKwO.js";import{d as E}from"./ContaUserStyles-jzYrjlID.js";import{a as _}from"./axios-DnYME9kn.js";function z(){const{user:s,logout:j}=a.useContext(U),[t,x]=a.useState(""),[c,m]=a.useState(""),[i,g]=a.useState(!1),[d,f]=a.useState(!1),l=()=>{g(!i)},p=async()=>{f(!0);try{const n=await _.post(`http://localhost:3001/aurea/usuario/${s.id_user}/solicitar-redefinicao-senha`);n.data.error?(console.error("Erro na resposta:",n.data.error),m(n.data.error),x("")):(x("Solicitação enviada com sucesso. Verifique seu e-mail."),m(""))}catch(n){console.error("Erro na requisição:",n),m("Erro ao enviar solicitação. Tente novamente."),x("")}finally{f(!1)}};if(s.funcao_user==="admin")return e.jsxs(S.Fragment,{children:[i?e.jsxs(h,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(h,{children:[e.jsx(B,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),i&&e.jsxs(M,{children:[e.jsx(o,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(o,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(o,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(o,{to:"/produtos",children:"Meus Produtos"}),e.jsx(y,{onClick:j,children:"Sair"})]}),e.jsx(b,{children:e.jsxs(k,{style:{width:"50%"},children:[e.jsx(r,{children:"Redefinir Senha"}),e.jsx(u,{children:"Para redefinir a sua senha, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(E,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de senha"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]});if(s.funcao_user==="user")return e.jsxs(S.Fragment,{children:[i?e.jsxs(h,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(h,{children:[e.jsx(B,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),i&&e.jsxs(M,{children:[e.jsx(o,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(o,{to:"/meus-pedidos",children:"Meus Pedidos"}),e.jsx(y,{onClick:j,children:"Sair"})]}),e.jsx(b,{children:e.jsxs(k,{children:[e.jsx(r,{children:"Redefinir Senha"}),e.jsx(u,{children:"Para redefinir a sua senha, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(E,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de senha"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]})}export{z as C};
