import{j as e,a as i,f as oe,R as w,T as n,g as C,S as ae,b as de}from"./GlobalStyles-Dqpp29B9.js";import{R as g,M as L,L as o,B as O,b as le,c as E,d as c,P as h,T as d,a as x,e as z,C as ce,I as q,D as S,f as t,g as V,E as he,S as xe,h as j,i as ue}from"./UserDashboardStyles-BUujLACN.js";import{M as je,a as fe,d as me,e as y}from"./ModalsStyles-CkMaqKjX.js";import{U as pe}from"./userContext-D66xfPlX.js";import{a as G}from"./axios-DnYME9kn.js";import{I as H,a as J}from"./index-CVGnD8mp.js";import{a as $}from"./Functions-Db1ipCHc.js";import{S as Ce}from"./SpinnerComponent-D-z1JUIS.js";function ge({children:_}){return e.jsx(je,{children:e.jsx(fe,{onClick:f=>f.stopPropagation(),children:_})})}function De(){const[_,f]=i.useState(!1),{user:s,isLoading:v,isAuthenticated:M,logout:b,updateUser:K}=i.useContext(pe),D=oe(),[P,Q]=i.useState(s.nome_user),[k,X]=i.useState(s.sobrenome_user),[A,Y]=i.useState(s.nasc_user),[B,Z]=i.useState(s.telefone_user),[N,ee]=i.useState(s.cpf_user),[a,U]=i.useState(!1),[I,R]=i.useState(""),[W,T]=i.useState(""),[u,se]=i.useState(!1),[m,re]=i.useState([]);i.useState("");const ne=r=>new Date(r).toJSON().slice(0,10),ie=()=>{f(!0)},te=()=>{f(!1),U(!1)},p=()=>{se(!u)},F=async()=>{U(!a);const r={nome_user:P,sobrenome_user:k,cpf_user:N,nasc_user:ne(A),telefone_user:B};if(a)try{const l=await G.put(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/usuario/${s.id_user}`,r);l.data.error?(R(l.data.error),T("")):(K(r),T("Seus dados foram atualizados."),U(!1))}catch{R("Erro ao atualizar dados.")}};return i.useEffect(()=>{(async()=>{try{const l=await G.get("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/pedidos");l.data.result&&re(l.data.result)}catch{resp.result.error}})()},[]),i.useEffect(()=>{v||M||D("/login")},[M,v,D]),v?e.jsx(Ce,{}):s?s.funcao_user==="admin"?e.jsxs(w.Fragment,{children:[u?e.jsxs(g,{children:[e.jsx(H,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:p}),e.jsxs(n,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(g,{children:[e.jsx(J,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:p}),e.jsxs(n,{children:["Boas-vindas, ",s.nome_user]})]}),u&&e.jsxs(L,{children:[e.jsx(o,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(o,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(o,{to:"/produtos",children:"Meus Produtos"}),e.jsx(o,{to:"/banners",children:"Meus Banners"}),e.jsx(o,{to:"/cupom",children:"Meus Cupons"}),e.jsx(o,{to:"/cd-rastreio",children:"Meus Rastreios"}),e.jsx(o,{to:"/redefinicao-mail",children:"Redefinir E-mail"}),e.jsx(o,{to:"/redefinicao-senha",children:"Redefinir Senha"}),e.jsx(O,{onClick:b,children:"Sair"})]}),e.jsxs(le,{children:[e.jsx(n,{children:"O que você quer fazer?"}),e.jsxs(E,{children:[e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Pedidos Ativos"}),e.jsx(d,{children:m.filter(r=>r.status_pedido==="em andamento").length>0?m.filter(r=>r.status_pedido==="em andamento").length:0}),e.jsx(x,{to:"/pedidos-ativos",children:"Verificar Pedidos"})]})}),e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Pedidos Encerrados"}),e.jsx(d,{children:m.filter(r=>r.status_pedido==="encerrado").length>0?m.filter(r=>r.status_pedido==="encerrado").length:0}),e.jsx(x,{to:"/pedidos-encerrados",children:"Verificar Pedidos"})]})})]}),e.jsxs(E,{children:[e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Produtos"}),e.jsx(C,{children:"Cadastre ou Remova seus produtos."}),e.jsx(x,{to:"/produtos",children:"Ir para funções"})]})}),e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Banner"}),e.jsx(C,{children:"Cadastre ou Remova seus banners."}),e.jsx(x,{to:"/banners",children:"Ir para funções"})]})})]}),e.jsxs(E,{children:[e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Cupons"}),e.jsx(C,{children:"Cadastre ou remova seus cupons de desconto."}),e.jsx(x,{to:"/cupom",children:"Ir para funções"})]})}),e.jsx(c,{children:e.jsxs(h,{children:[e.jsx(d,{children:"Código de rastreio"}),e.jsx(C,{children:"Cadastre os códigos de rastreio dos pedidos."}),e.jsx(x,{to:"/cd-rastreio",children:"Ir para funções"})]})})]})]})]}):e.jsxs(w.Fragment,{children:[u?e.jsxs(g,{children:[e.jsx(z,{children:e.jsx(H,{onClick:p})}),e.jsxs(n,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(g,{children:[e.jsx(z,{children:e.jsx(J,{onClick:p})}),e.jsxs(n,{children:["Boas-vindas, ",s.nome_user]})]}),u&&e.jsxs(L,{children:[e.jsx(o,{to:"/meus-pedidos",children:"Meus Pedidos"}),e.jsx(o,{to:"/redefinicao-mail",children:"Redefinir E-mail"}),e.jsx(o,{to:"/redefinicao-senha",children:"Redefinir Senha"}),e.jsx(O,{onClick:b,children:"Sair"})]}),e.jsx(ce,{children:e.jsxs(q,{children:[e.jsxs(S,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Nome"}),e.jsx("p",{children:s.nome_user||"N/A"})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Sobrenome"}),e.jsx("p",{children:s.sobrenome_user||"N/A"})]})]}),e.jsxs(S,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Email"}),e.jsx("p",{children:s.email_user||"N/A"})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"CPF"}),e.jsx("p",{children:s.cpf_user||"N/A"})]})]}),e.jsxs(V,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Nascimento"}),e.jsx("p",{children:$(s.nasc_user)||"N/A"})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Telefone"}),e.jsx("p",{children:s.telefone_user||"N/A"})]})]}),e.jsx(he,{onClick:ie,children:"Editar"})]})}),_&&e.jsxs(ge,{children:[e.jsx(xe,{children:"Minhas Informações"}),e.jsx(me,{children:e.jsxs(q,{children:[e.jsxs(S,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Nome"}),a?e.jsx(j,{type:"text",name:"nome",value:P,onChange:r=>Q(r.target.value)}):e.jsx("p",{children:s.nome_user})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Sobrenome"}),a?e.jsx(j,{type:"text",name:"sobrenome",value:k,onChange:r=>X(r.target.value)}):e.jsx("p",{children:s.sobrenome_user})]})]}),e.jsxs(S,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Email"}),e.jsx("p",{children:s.email_user})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"CPF"}),a?e.jsx(j,{type:"text",name:"cpf",value:N,onChange:r=>ee(r.target.value)}):e.jsx("p",{children:s.cpf_user})]})]}),e.jsxs(V,{children:[e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Nascimento"}),a?e.jsx(j,{type:"date",name:"nasc",value:A,onChange:r=>Y(r.target.value)}):e.jsx("p",{children:$(s.nasc_user)})]}),e.jsxs(t,{children:[e.jsx(n,{style:{fontWeight:"500"},children:"Telefone"}),a?e.jsx(j,{type:"text",name:"telefone",value:B,onChange:r=>Z(r.target.value)}):e.jsx("p",{children:s.telefone_user})]})]}),e.jsxs(ue,{children:[W&&e.jsx(ae,{children:W}),I&&e.jsx(de,{children:I}),a?e.jsx(y,{onClick:F,children:"Salvar"}):e.jsx(y,{onClick:F,children:"Editar"}),e.jsx(y,{onClick:te,children:"Fechar"})]})]})})]})]}):e.jsx("p",{children:"Usuário não encontrado."})}export{De as U};
