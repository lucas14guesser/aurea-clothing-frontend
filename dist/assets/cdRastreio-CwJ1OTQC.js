import{a as o,j as e,R as T,T as c,C as N,g as z}from"./GlobalStyles-Dqpp29B9.js";import{C as G,a as O,b as $,c as H,L as S,d as I,e as B,S as J,B as K,f as Q}from"./ProdutosStyle-8Z2-wOEa.js";import{b as V}from"./index-U_MZ96hN.js";import{I as W,a as X,b as Y}from"./index-CVGnD8mp.js";import{a as v}from"./axios-DnYME9kn.js";import{R as y,M as Z,L as l,B as ee}from"./UserDashboardStyles-BUujLACN.js";import{U as se}from"./userContext-Hfd7AKwO.js";import{a as re,B as oe,b as te}from"./NavBarStyles-CgKT-dJj.js";import{a as ae}from"./Functions-BNM27soa.js";import{C as de,B as R}from"./ProdutoStyles-Cz6hDj1C.js";import{C as ie}from"./CdRastreioStyles-rUZR9pxi.js";function Pe(){const{user:h,logout:b}=o.useContext(se),[A,M]=o.useState([]),[u,x]=o.useState([]),[E,k]=o.useState(""),[d,j]=o.useState(""),[p,m]=o.useState(""),[i,w]=o.useState(!1),C=()=>{w(!i)},n=10,[t,D]=o.useState(1),g=(t-1)*n,F=g+n,P=u.slice(g,F),f=Math.ceil(u.length/n),_=s=>{D(s)};o.useEffect(()=>{(async()=>{try{const r=await v.get("http://localhost:3001/aurea/pedidos");M(r.data.result),x(r.data.result)}catch(r){console.error("Erro ao buscar todos os pedidos.",r)}})()},[]);const L=s=>{const r=s.target.value.toLowerCase();k(r);const a=A.filter(q=>q.id_pedido.toString().toLowerCase().includes(r));x(a)},U=async s=>{s.preventDefault();const r={id_pedido:d,cd_rastreio_frete_pedido:p};try{(await v.put(`http://localhost:3001/aurea/pedido/cd-rastreio/${d}`,r)).data.result?(alert("Código de rastreio adicionado com sucesso!"),j(""),m("")):alert("Erro ao adicionar código de rastreio.")}catch(a){console.error("Erro ao adicionar código de rastreio",a)}};return e.jsxs(T.Fragment,{children:[i?e.jsxs(y,{children:[e.jsx(W,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:C}),e.jsxs(c,{children:["Boas-vindas, ",h.nome_user]})]}):e.jsxs(y,{children:[e.jsx(X,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:C}),e.jsxs(c,{children:["Boas-vindas, ",h.nome_user]})]}),i&&e.jsxs(Z,{children:[e.jsx(l,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(l,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(l,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(ee,{onClick:b,children:"Sair"})]}),e.jsxs(N,{children:[e.jsx(c,{children:"Código de Rastreio"}),e.jsx(G,{children:e.jsx(O,{children:e.jsx($,{children:e.jsxs(H,{children:[e.jsx(z,{style:{color:"#A87826"},children:"Adicionar código de rastreio"}),e.jsxs(S,{children:[e.jsx(I,{htmlFor:"id_pedido",children:e.jsx(V,{})}),e.jsx(B,{type:"text",placeholder:"ID do Pedido",id:"id_pedido",required:!0,value:d,onChange:s=>j(s.target.value)})]}),e.jsxs(S,{children:[e.jsx(I,{htmlFor:"cd_rastreio",children:e.jsx(Y,{})}),e.jsx(B,{type:"text",id:"cd_rastreio",name:"cd_rastreio",placeholder:"Código de rastreio",required:!0,value:p,onChange:s=>m(s.target.value)})]}),e.jsx(J,{children:e.jsx(K,{onClick:U,children:"Adicionar"})})]})})})}),e.jsxs(ie,{children:[e.jsx(re,{type:"text",name:"searchCupom",id:"searchCupom",value:E,placeholder:"Pedido que procura?",onChange:L}),e.jsx(oe,{children:e.jsx(te,{})})]}),e.jsx(Q,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Data"}),e.jsx("th",{children:"Pagamento"}),e.jsx("th",{children:"Endereço"}),e.jsx("th",{children:"Nº Endereço"}),e.jsx("th",{children:"Frete"}),e.jsx("th",{children:"Código Rastreio"})]})}),e.jsx("tbody",{children:Array.isArray(P)&&P.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id_pedido}),e.jsx("td",{children:ae(s.data_pedido)}),e.jsx("td",{children:s.pagamento_pedido}),e.jsx("td",{children:s.endereco_pedido}),e.jsx("td",{children:s.num_endereco_pedido}),e.jsx("td",{children:s.opcao_frete_pedido}),e.jsx("td",{children:s.cd_rastreio_frete_pedido})]},s.id_pedido))})]})}),e.jsxs(de,{children:[e.jsx(R,{disabled:t===1,onClick:()=>_(t-1),children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",f]}),e.jsx(R,{disabled:t===f,onClick:()=>_(t+1),children:"Próxima"})]})]})]})}export{Pe as C};
