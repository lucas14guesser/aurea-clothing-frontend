import{a as s,j as e,R as K,T as u,C as Q,g as S}from"./GlobalStyles-Dqpp29B9.js";import{C as V,a as X,b as E,c as F,I as Y,L as h,d as x,F as Z,e as A,S as M,B as w,f as ee,g as re}from"./ProdutosStyle-8Z2-wOEa.js";import{A as ne,a as se}from"./index-DT7h3x8e.js";import{a as m}from"./axios-DnYME9kn.js";import{R as k,M as ae,L as j,B as te}from"./UserDashboardStyles-BUujLACN.js";import{I as oe,a as ie}from"./index-CVGnD8mp.js";import{U as ce}from"./userContext-Hfd7AKwO.js";import{C as le,a as de,B as ue,b as he}from"./NavBarStyles-CgKT-dJj.js";import{b as xe}from"./index-U_MZ96hN.js";import{T as me,C as je,B as D}from"./ProdutoStyles-Cz6hDj1C.js";function ve(){const{user:p,logout:L}=s.useContext(ce),[i,B]=s.useState(""),[t,b]=s.useState(""),[f,N]=s.useState(""),[T,U]=s.useState([]),[c,R]=s.useState(!1),[q,O]=s.useState(""),[C,g]=s.useState([]),I=()=>{R(!c)},z=r=>{const n=r.target.value.toLowerCase();O(n);const o=T.filter(d=>d.nome_banner.toLowerCase().includes(n)).sort((d,J)=>J.id_banner-d.id_banner);g(o)},l=5,[a,G]=s.useState(1),P=(a-1)*l,$=P+l,y=C.slice(P,$),_=Math.ceil(C.length/l),v=r=>{G(r)},W=async r=>{r.preventDefault();const n=new FormData;n.append("img_banner",i),n.append("nome_banner",f);try{(await m.post("http://localhost:3001/aurea/banner",n,{headers:{"Content-Type":"multipart/form-data"}})).data.result?(alert("Banner inserido com sucesso!"),B("")):alert("Erro ao inserir banner")}catch(o){console.error("Erro ao inserir banner.",o)}},H=async r=>{if(r.preventDefault(),!t||isNaN(t)){alert("Por favor, insira um ID de banner válido");return}try{(await m.delete(`http://localhost:3001/aurea/banner/${t}`)).data.result?(b(""),alert("Banner excluído com sucesso!")):alert("Erro ao excluir Banner.")}catch(n){console.error("Erro ao excluir Banner",n),alert("Erro ao excluir Banner.")}};return s.useEffect(()=>{(async()=>{try{const n=await m.get("http://localhost:3001/aurea/banners");U(n.data.result),g(n.data.result)}catch(n){console.error("Erro ao buscar todos os banners.",n)}})()},[]),e.jsxs(K.Fragment,{children:[c?e.jsxs(k,{children:[e.jsx(oe,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:I}),e.jsxs(u,{children:["Boas-vindas, ",p.nome_user]})]}):e.jsxs(k,{children:[e.jsx(ie,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:I}),e.jsxs(u,{children:["Boas-vindas, ",p.nome_user]})]}),c&&e.jsxs(ae,{children:[e.jsx(j,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(j,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(j,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(te,{onClick:L,children:"Sair"})]}),e.jsxs(Q,{children:[e.jsx(u,{children:"Banners"}),e.jsx(V,{children:e.jsxs(X,{children:[e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(S,{style:{color:"#A87826"},children:"Inserir Banner"}),e.jsx(Y,{children:e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(ne,{})}),e.jsx("label",{htmlFor:"fileInput",children:"Escolher Imagem"}),e.jsx("input",{type:"file",id:"fileInput",required:!0,onChange:r=>B(r.target.files[0])})," ",i&&e.jsx(Z,{children:i.name})," "]})}),e.jsxs(h,{children:[e.jsxs(x,{htmlFor:"nome_banner",children:[e.jsx(xe,{})," "]}),e.jsx(A,{type:"text",id:"nome_banner",placeholder:"Nome do Banner",value:f,required:!0,onChange:r=>N(r.target.value)})," "]}),e.jsxs(M,{children:[e.jsx(w,{onClick:W,children:"Inserir"})," "]})]})}),e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(S,{style:{color:"#A87826"},children:"Excluir Banner"}),e.jsxs(h,{children:[e.jsx(x,{htmlFor:"id_banner",children:e.jsx(se,{})}),e.jsx(A,{type:"number",id:"id_banner",placeholder:"ID do banner",value:t,onChange:r=>b(r.target.value)})," "]}),e.jsxs(M,{children:[e.jsx(w,{onClick:H,children:"Excluir"})," "]})]})})]})}),e.jsxs(le,{style:{width:"100%",justifyContent:"center",margin:"2rem 0 0 0"},children:[e.jsx(de,{type:"text",name:"searchBanner",id:"searchBanner",value:q,placeholder:"Banner que procura?",onChange:z}),e.jsxs(ue,{children:[e.jsx(he,{})," "]})]}),e.jsx(ee,{children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(me,{children:"ID"}),e.jsx("th",{children:"Imagem"})]})}),e.jsx("tbody",{children:Array.isArray(y)&&y.slice().sort((r,n)=>n.id_banner-r.id_banner).map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.id_banner}),e.jsx("td",{children:e.jsx(re,{src:`http://localhost:3001/bannerUpload/${r.img_banner}`,alt:r.nome_banner,title:r.nome_banner})})]},r.id_banner))})]})}),e.jsxs(je,{children:[e.jsx(D,{disabled:a===1,onClick:()=>v(a-1),children:"Anterior"}),e.jsxs("span",{children:["Página ",a," de ",_]}),e.jsx(D,{disabled:a===_,onClick:()=>v(a+1),children:"Próxima"})]})]})]})}export{ve as B};
