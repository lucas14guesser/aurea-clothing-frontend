import{j as e,a as s,f as w,b as R,T,S as D}from"./GlobalStyles-Dqpp29B9.js";import{C as q,S as M,F as l,L as u,I as h,e as O,a as N,B as U,f as k,g as G,h as H,c as J,b as K}from"./ContaUserStyles-jzYrjlID.js";import{a as j,R as Q}from"./index-CmN5j4cY.js";import{a as F}from"./axios-DnYME9kn.js";import{U as V}from"./userContext-D66xfPlX.js";import{M as W,a as X}from"./ModalsStyles-CkMaqKjX.js";function Y({children:t}){return e.jsx(W,{children:e.jsx(X,{onClick:r=>r.stopPropagation(),style:{width:"30rem"},children:t})})}function Z(){const[t,r]=s.useState(""),[i,m]=s.useState(""),[c,o]=s.useState(""),[f,p]=s.useState(""),[S,P]=s.useState(!1),[x,C]=s.useState(""),[B,d]=s.useState(""),[v,E]=s.useState(""),[L,b]=s.useState(!1),I=w(),{login:_}=s.useContext(V),z=async n=>{if(n.preventDefault(),o(""),p(""),!t||!i){o("Preencha todos os campos.");return}const g={email_user:t,senha_user:i};try{const a=await F.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/login",g,{withCredentials:!0});a.status===200&&a.data.success?(p("Login bem-sucedido!"),await _(t),I("/minha-conta")):o("Falha ao fazer login. Por favor, tente novamente.")}catch(a){a.response&&a.response.status===400?o(a.response.data.message):a.response&&a.response.status===401?o("Credenciais inválidas. Tente novamente."):o("Ocorreu um erro no servidor. Por favor, tente mais tarde.")}},y=()=>{P(!S)},A=async n=>{n.preventDefault(),b(!0);const g={email_user:x};if(!x){d("E-mail é obrigatório");return}try{const a=await F.post("https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/usuario/senha/esqueci-senha",g);a.data.error?(E(""),d(a.data.error)):(E("E-mail enviado com sucesso. Siga as instruções para trocar de senha."),d(""),C(""))}catch(a){d("Erro ao enviar e-mail."),console.error(a)}finally{b(!1)}};return e.jsxs(q,{children:[" ",e.jsxs(M,{children:[" ","Acesse sua conta"]}),e.jsxs("form",{onSubmit:z,children:[" ",e.jsxs(l,{children:[" ",e.jsxs(u,{htmlFor:"email-login",children:[" ",e.jsx(j,{})," "]}),e.jsx(h,{type:"email",name:"email-login",id:"email-login",placeholder:"E-mail",required:!0,value:t,onChange:n=>r(n.target.value)})]}),e.jsxs(l,{children:[" ",e.jsxs(u,{htmlFor:"senha-login",children:[" ",e.jsx(Q,{})," "]}),e.jsx(h,{type:"password",name:"senha-login",id:"senha-login",placeholder:"Senha",required:!0,value:i,onChange:n=>m(n.target.value)})]}),c&&e.jsx(R,{children:c})," ",f&&e.jsx("p",{style:{color:"green"},children:f})," ",e.jsxs(O,{children:[" ",e.jsxs(N,{onClick:y,children:[" ","Esqueci minha senha"]}),e.jsxs(U,{type:"submit",children:[" ","Entrar"]})]})]}),S&&e.jsxs(Y,{children:[e.jsx(T,{children:"Esqueci minha senha"}),e.jsxs(l,{children:[e.jsx(u,{children:e.jsx(j,{})}),e.jsx(h,{type:"email",placeholder:"Seu e-mail",value:x,onChange:n=>C(n.target.value)})]}),v?e.jsx(D,{children:v}):e.jsx(R,{children:B}),e.jsxs(l,{children:[e.jsx(k,{type:"submit",onClick:A,disabled:L,children:L?"Enviando...":"Enviar"}),e.jsx(k,{type:"submit",onClick:y,children:"Fechar"})]})]})]})}function $(){return e.jsxs(G,{children:[" ",e.jsxs(H,{children:[" ","Se você ainda não tem uma conta, por favor, cadastre-se ao lado. "]})]})}function ee(){const[t,r]=s.useState(""),i=w(),m=o=>{r(o.target.value)},c=()=>{t?i("/cadastro",{state:{emailSettado:t}}):alert("E-mail é obrigatório.")};return e.jsxs(q,{children:[" ",e.jsx(M,{style:{marginBottom:"1.5rem"},children:"Realize o cadastro"})," ",e.jsxs(l,{children:[" ",e.jsxs(u,{htmlFor:"email-cadastro",children:[" ",e.jsx(j,{})," "]}),e.jsx(h,{type:"email",name:"email-cadastro",id:"email-cadastro",placeholder:"E-mail",required:!0,value:t,onChange:m})," "]}),e.jsx(U,{onClick:c,children:"Cadastrar"})," "]})}function ae(){return e.jsxs(J,{children:[" ",e.jsx(Z,{})," ",e.jsx($,{})," ",e.jsx(ee,{})," "]})}function se(){return e.jsxs(T,{children:[" ","Acesse sua conta ou cadastre-se"]})}function ce(){return e.jsxs(K,{children:[" ",e.jsx(se,{})," ",e.jsx(ae,{})," "]})}export{ce as C};
