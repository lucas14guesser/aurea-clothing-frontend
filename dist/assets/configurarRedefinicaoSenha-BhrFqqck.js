import{a as n,j as e,R as S,T as r,g as u,S as C,b as R}from"./GlobalStyles-Dqpp29B9.js";import{R as h,M as b,L as o,B as M,C as k,F as y}from"./UserDashboardStyles-BUujLACN.js";import{I as v,a as g}from"./index-CVGnD8mp.js";import{U}from"./userContext-D66xfPlX.js";import{d as B}from"./ContaUserStyles-jzYrjlID.js";import{a as _}from"./axios-DnYME9kn.js";function z(){const{user:s,logout:j}=n.useContext(U),[t,x]=n.useState(""),[c,m]=n.useState(""),[i,E]=n.useState(!1),[d,f]=n.useState(!1),l=()=>{E(!i)},p=async()=>{f(!0);try{const a=await _.post(`https://test-aureaclothing-backend-466bc65ebfec.herokuapp.com/aurea/usuario/${s.id_user}/solicitar-redefinicao-senha`);a.data.error?(console.error("Erro na resposta:",a.data.error),m(a.data.error),x("")):(x("Solicitação enviada com sucesso. Verifique seu e-mail."),m(""))}catch(a){console.error("Erro na requisição:",a),m("Erro ao enviar solicitação. Tente novamente."),x("")}finally{f(!1)}};if(s.funcao_user==="admin")return e.jsxs(S.Fragment,{children:[i?e.jsxs(h,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(h,{children:[e.jsx(g,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),i&&e.jsxs(b,{children:[e.jsx(o,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(o,{to:"/pedidos-ativos",children:"Pedidos Ativos"}),e.jsx(o,{to:"/pedidos-encerrados",children:"Pedidos Encerrados"}),e.jsx(o,{to:"/produtos",children:"Meus Produtos"}),e.jsx(M,{onClick:j,children:"Sair"})]}),e.jsx(k,{children:e.jsxs(y,{style:{width:"50%"},children:[e.jsx(r,{children:"Redefinir Senha"}),e.jsx(u,{children:"Para redefinir a sua senha, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(B,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de senha"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]});if(s.funcao_user==="user")return e.jsxs(S.Fragment,{children:[i?e.jsxs(h,{children:[e.jsx(v,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}):e.jsxs(h,{children:[e.jsx(g,{style:{fontSize:"2rem",color:"#A87826",cursor:"pointer"},onClick:l}),e.jsxs(r,{children:["Boas-vindas, ",s.nome_user]})]}),i&&e.jsxs(b,{children:[e.jsx(o,{to:"/minha-conta",children:"Minha Conta"}),e.jsx(o,{to:"/meus-pedidos",children:"Meus Pedidos"}),e.jsx(M,{onClick:j,children:"Sair"})]}),e.jsx(k,{children:e.jsxs(y,{children:[e.jsx(r,{children:"Redefinir Senha"}),e.jsx(u,{children:"Para redefinir a sua senha, clique no botão abaixo e confirme sua solicitação em seu e-mail."}),t&&e.jsx(C,{children:t}),c&&e.jsx(R,{children:c}),e.jsx(B,{type:"button",onClick:p,disabled:d,children:d?"Solicitando...":"Solicitar redefinição de senha"}),e.jsx(u,{children:"Verifique também sua caixa de spam se não encontrar o e-mail na sua caixa de entrada."})]})})]})}export{z as C};
